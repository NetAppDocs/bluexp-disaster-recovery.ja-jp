---
sidebar: sidebar 
permalink: use/resource-group.html 
keywords: disaster recovery, bluexp disaster recovery, failover, failback, replicate, fail over, fail back, vmware, vcenter, replication plan, protection, disaster, recovery, virtual machines, vm 
summary: NetApp BlueXPディザスタリカバリは、ディザスタリカバリのワークフローを自動化するクラウドベースのディザスタリカバリサービスです。vCenterサイトを追加したら、ディザスタリカバリまたはレプリケーションの計画を作成できます。 
---
= リソースグループを作成してVMをまとめます。
:hardbreaks:
:allow-uri-read: 
:icons: font
:imagesdir: ../media/use/


[role="lead"]
vCenterサイトを追加したら、VMをグループ化するリソースグループを作成できます。リソースグループを使用すると、一連の依存VMを要件に合わせて論理グループに編成できます。たとえば、1つのアプリケーションに関連付けられたVMをグループ化したり、同様の階層を持つアプリケーションをグループ化したりできます。別の例として、グループにはリカバリ時に実行できる遅延ブート順序が含まれている可能性があります。

リソースグループは、次の方法で作成できます。

* [Resource groups]タフヲシヨウ
* ディザスタリカバリまたは_レプリケーション計画_を作成しているとき。ソースvCenterクラスタでホストされているVMが多数ある場合は、レプリケーション計画の作成中にリソースグループを作成する方が簡単な場合があります。レプリケーション計画の作成中にリソースグループを作成する手順については'を参照してくださいlink:dr-plan-create.html["レプリケーション計画の作成"]



TIP: 各リソースグループには1つ以上のVMを含めることができます。VMの電源は、レプリケーション計画にVMを含める順序に基づいてオンになります。リソースグループリストでVMを上下にドラッグすると、順序を変更できます。

.リソースグループについて
リソースグループを使用すると、運用上関連があり、単一のユニットとして保護する必要があるVMを組み合わせることができます。

たとえば、POSアプリケーションは、データベースをホストする複数のVM、ビジネスロジックルール管理をホストする複数のVM、Webサーバベースのストアフロントとして機能する複数のVMで構成されます。これらのVMを単一のリソースグループに配置することで、アプリケーション全体の可用性を単一の保護プロセスで管理できます。

リソースグループを設定すると、VMの起動順序やネットワーク接続などのレプリケーションプランルールを適用して、アプリケーションに必要なすべてのVMを適切にリカバリすることができます。

.どのように機能しますか？
BlueXP  ディザスタリカバリは、基盤となるONTAPボリュームと、リソースグループ内のVMをホストしているLUNをレプリケートすることでVMを保護します。そのため、リソースグループ内のVMをホストしている各データストアの名前がvCenterに照会されます。次に、BlueXP  ディザスタリカバリによって、そのデータストアをホストしているソースONTAPボリュームまたはLUNが特定されます。すべての保護は、SnapMirrorレプリケーションを使用してONTAPボリュームレベルで実行されます。

リソースグループ内のVMが異なるデータストアでホストされている場合、BlueXP  ディザスタリカバリでは、次のいずれかの方法を使用して、ONTAPボリュームまたはLUNのデータ整合性スナップショットを作成します。

[cols="30,65a"]
|===
| FlexVolボリュームの相対的な場所 | スナップショットレプリカプロセス 


| 複数のデータストア-同じSVM内のFlexVolボリューム*  a| 
* ONTAP整合グループが作成されました
* 作成された整合グループのSnapshot
* ボリュームを対象としたSnapMirrorレプリケーションの実行




| 複数のデータストア-複数のSVMにFlexVolボリュームを配置*  a| 
* ONTAP API:。 `cg_start`すべてのボリュームを休止してSnapshotを作成し、すべてのリソースグループボリュームのボリュームを対象としたSnapshotを開始します。
* ONTAP API:。 `cg_end`すべてのボリュームでI/Oを再開し、Snapshotの作成後にボリュームを対象としたSnapMirrorレプリケーションを有効にします。


|===
リソースグループを作成するときは、次の問題を考慮してください。

* 1つのデータストアで複数のレプリケーションプランで保護されているVMをホストしないでください。
* 保護されているVMと保護されていないVMを同じデータストアでホストしないでください。保護されているVMと保護されていないVMが同じデータストアでホストされている場合、次の問題が発生する可能性があります。
+
** BlueXP  ディザスタリカバリではSnapMirrorを使用し、システムはONTAPボリューム全体をレプリケートするため、そのボリュームの使用容量はライセンスに関する考慮事項として使用されます。この場合、保護されているVMと保護されていないVMの両方で消費されるボリュームスペースがこの計算に含まれます。
** リソースグループとその関連データストアをディザスタリカバリサイトにフェイルオーバーする必要がある場合は、フェイルオーバープロセスによって保護されていないVM（リソースグループに含まれていないがONTAPボリュームでホストされているVM）がソースサイトに存在しなくなり、ソースサイトで保護されていないVMが障害されます。また、BlueXP  ディザスタリカバリでは、保護されていないVMはフェイルオーバーvCenterサイトで開始されません。


* VMを保護するには、そのVMをリソースグループに含める必要があります。


*ベストプラクティス*：BlueXP  ディザスタリカバリを導入する前にVMを整理し、「データストアの無秩序な増加」を最小限に抑えます。保護が必要なVMはデータストアのサブセットに配置し、保護されないVMは別のデータストアに配置します。特定のデータストア上のVMが異なるレプリケーションプランで保護されていないことを確認します。

.手順
. BlueXP  のディザスタリカバリメニューで、*[リソースグループ]*を選択します。
. 「 * 追加」を選択します。
. リソースグループの名前を入力します。
. VMが配置されているソースvCenterクラスタを選択します。
. [Add resource groups]ページの左側で、保護するVMを選択します。
+
image:dr-resource-groups-add.png["[Add resource groups]ページのスクリーンショット"]

. 必要に応じて、各VMをリストの上または下にドラッグして、右側のVMの順序を変更します。VMを含める順序に基づいて、VMの電源がオンになります。
. 「 * 追加」を選択します。

